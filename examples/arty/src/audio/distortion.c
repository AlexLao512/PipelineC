#pragma once
#include "lib/fixed/q0_23.h"
#include "lib/fixed/q0_23.h"
#include "lib/fixed/q0_23.h"
#include "lib/fixed/q0_23.h"
q0_23_t distortion_mono(q0_23_t x)
{
// Get lookup addr from top bits of value
uint8_t lut_addr = int24_23_16(x.qmn);
// And interpolation bits from lsbs
uint16_t interp_point = int24_15_0(x.qmn);
// Generated lookup values:
q0_23_t Y_VALUES[256];
Y_VALUES[128].qmn = -0x7ffe83;
Y_VALUES[129].qmn = -0x7ffe64;
Y_VALUES[130].qmn = -0x7ffe42;
Y_VALUES[131].qmn = -0x7ffe1e;
Y_VALUES[132].qmn = -0x7ffdf7;
Y_VALUES[133].qmn = -0x7ffdcd;
Y_VALUES[134].qmn = -0x7ffd9f;
Y_VALUES[135].qmn = -0x7ffd6d;
Y_VALUES[136].qmn = -0x7ffd38;
Y_VALUES[137].qmn = -0x7ffcfe;
Y_VALUES[138].qmn = -0x7ffcc0;
Y_VALUES[139].qmn = -0x7ffc7c;
Y_VALUES[140].qmn = -0x7ffc33;
Y_VALUES[141].qmn = -0x7ffbe4;
Y_VALUES[142].qmn = -0x7ffb8f;
Y_VALUES[143].qmn = -0x7ffb32;
Y_VALUES[144].qmn = -0x7fface;
Y_VALUES[145].qmn = -0x7ffa62;
Y_VALUES[146].qmn = -0x7ff9ed;
Y_VALUES[147].qmn = -0x7ff96f;
Y_VALUES[148].qmn = -0x7ff8e7;
Y_VALUES[149].qmn = -0x7ff853;
Y_VALUES[150].qmn = -0x7ff7b3;
Y_VALUES[151].qmn = -0x7ff707;
Y_VALUES[152].qmn = -0x7ff64c;
Y_VALUES[153].qmn = -0x7ff582;
Y_VALUES[154].qmn = -0x7ff4a8;
Y_VALUES[155].qmn = -0x7ff3bc;
Y_VALUES[156].qmn = -0x7ff2bd;
Y_VALUES[157].qmn = -0x7ff1a9;
Y_VALUES[158].qmn = -0x7ff07f;
Y_VALUES[159].qmn = -0x7fef3d;
Y_VALUES[160].qmn = -0x7fede0;
Y_VALUES[161].qmn = -0x7fec67;
Y_VALUES[162].qmn = -0x7feacf;
Y_VALUES[163].qmn = -0x7fe916;
Y_VALUES[164].qmn = -0x7fe73a;
Y_VALUES[165].qmn = -0x7fe537;
Y_VALUES[166].qmn = -0x7fe309;
Y_VALUES[167].qmn = -0x7fe0af;
Y_VALUES[168].qmn = -0x7fde24;
Y_VALUES[169].qmn = -0x7fdb63;
Y_VALUES[170].qmn = -0x7fd86a;
Y_VALUES[171].qmn = -0x7fd532;
Y_VALUES[172].qmn = -0x7fd1b8;
Y_VALUES[173].qmn = -0x7fcdf5;
Y_VALUES[174].qmn = -0x7fc9e4;
Y_VALUES[175].qmn = -0x7fc57f;
Y_VALUES[176].qmn = -0x7fc0be;
Y_VALUES[177].qmn = -0x7fbb9a;
Y_VALUES[178].qmn = -0x7fb60b;
Y_VALUES[179].qmn = -0x7fb009;
Y_VALUES[180].qmn = -0x7fa989;
Y_VALUES[181].qmn = -0x7fa283;
Y_VALUES[182].qmn = -0x7f9aea;
Y_VALUES[183].qmn = -0x7f92b3;
Y_VALUES[184].qmn = -0x7f89d1;
Y_VALUES[185].qmn = -0x7f8037;
Y_VALUES[186].qmn = -0x7f75d5;
Y_VALUES[187].qmn = -0x7f6a9b;
Y_VALUES[188].qmn = -0x7f5e77;
Y_VALUES[189].qmn = -0x7f5157;
Y_VALUES[190].qmn = -0x7f4326;
Y_VALUES[191].qmn = -0x7f33cd;
Y_VALUES[192].qmn = -0x7f2336;
Y_VALUES[193].qmn = -0x7f1145;
Y_VALUES[194].qmn = -0x7efddf;
Y_VALUES[195].qmn = -0x7ee8e5;
Y_VALUES[196].qmn = -0x7ed237;
Y_VALUES[197].qmn = -0x7eb9b1;
Y_VALUES[198].qmn = -0x7e9f2e;
Y_VALUES[199].qmn = -0x7e8282;
Y_VALUES[200].qmn = -0x7e6383;
Y_VALUES[201].qmn = -0x7e41fe;
Y_VALUES[202].qmn = -0x7e1dc0;
Y_VALUES[203].qmn = -0x7df690;
Y_VALUES[204].qmn = -0x7dcc32;
Y_VALUES[205].qmn = -0x7d9e61;
Y_VALUES[206].qmn = -0x7d6cd8;
Y_VALUES[207].qmn = -0x7d3748;
Y_VALUES[208].qmn = -0x7cfd5e;
Y_VALUES[209].qmn = -0x7cbec0;
Y_VALUES[210].qmn = -0x7c7b0a;
Y_VALUES[211].qmn = -0x7c31d5;
Y_VALUES[212].qmn = -0x7be2ac;
Y_VALUES[213].qmn = -0x7b8d15;
Y_VALUES[214].qmn = -0x7b3089;
Y_VALUES[215].qmn = -0x7acc78;
Y_VALUES[216].qmn = -0x7a6046;
Y_VALUES[217].qmn = -0x79eb49;
Y_VALUES[218].qmn = -0x796cca;
Y_VALUES[219].qmn = -0x78e404;
Y_VALUES[220].qmn = -0x785020;
Y_VALUES[221].qmn = -0x77b039;
Y_VALUES[222].qmn = -0x770353;
Y_VALUES[223].qmn = -0x764860;
Y_VALUES[224].qmn = -0x757e3d;
Y_VALUES[225].qmn = -0x74a3ac;
Y_VALUES[226].qmn = -0x73b759;
Y_VALUES[227].qmn = -0x72b7d2;
Y_VALUES[228].qmn = -0x71a388;
Y_VALUES[229].qmn = -0x7078ca;
Y_VALUES[230].qmn = -0x6f35c6;
Y_VALUES[231].qmn = -0x6dd882;
Y_VALUES[232].qmn = -0x6c5edd;
Y_VALUES[233].qmn = -0x6ac688;
Y_VALUES[234].qmn = -0x690d05;
Y_VALUES[235].qmn = -0x672fa2;
Y_VALUES[236].qmn = -0x652b74;
Y_VALUES[237].qmn = -0x62fd54;
Y_VALUES[238].qmn = -0x60a1db;
Y_VALUES[239].qmn = -0x5e1558;
Y_VALUES[240].qmn = -0x5b53cf;
Y_VALUES[241].qmn = -0x5858f2;
Y_VALUES[242].qmn = -0x552018;
Y_VALUES[243].qmn = -0x51a437;
Y_VALUES[244].qmn = -0x4ddfdd;
Y_VALUES[245].qmn = -0x49cd27;
Y_VALUES[246].qmn = -0x4565b7;
Y_VALUES[247].qmn = -0x40a2a9;
Y_VALUES[248].qmn = -0x3b7c8d;
Y_VALUES[249].qmn = -0x35eb56;
Y_VALUES[250].qmn = -0x2fe64f;
Y_VALUES[251].qmn = -0x29640f;
Y_VALUES[252].qmn = -0x225a6b;
Y_VALUES[253].qmn = -0x1abe60;
Y_VALUES[254].qmn = -0x12840b;
Y_VALUES[255].qmn = -0x99e8d;
Y_VALUES[0].qmn = 0x0;
Y_VALUES[1].qmn = 0x99e8d;
Y_VALUES[2].qmn = 0x12840b;
Y_VALUES[3].qmn = 0x1abe60;
Y_VALUES[4].qmn = 0x225a6b;
Y_VALUES[5].qmn = 0x29640f;
Y_VALUES[6].qmn = 0x2fe64f;
Y_VALUES[7].qmn = 0x35eb56;
Y_VALUES[8].qmn = 0x3b7c8d;
Y_VALUES[9].qmn = 0x40a2a9;
Y_VALUES[10].qmn = 0x4565b7;
Y_VALUES[11].qmn = 0x49cd27;
Y_VALUES[12].qmn = 0x4ddfdd;
Y_VALUES[13].qmn = 0x51a437;
Y_VALUES[14].qmn = 0x552018;
Y_VALUES[15].qmn = 0x5858f2;
Y_VALUES[16].qmn = 0x5b53cf;
Y_VALUES[17].qmn = 0x5e1558;
Y_VALUES[18].qmn = 0x60a1db;
Y_VALUES[19].qmn = 0x62fd54;
Y_VALUES[20].qmn = 0x652b74;
Y_VALUES[21].qmn = 0x672fa2;
Y_VALUES[22].qmn = 0x690d05;
Y_VALUES[23].qmn = 0x6ac688;
Y_VALUES[24].qmn = 0x6c5edd;
Y_VALUES[25].qmn = 0x6dd882;
Y_VALUES[26].qmn = 0x6f35c6;
Y_VALUES[27].qmn = 0x7078ca;
Y_VALUES[28].qmn = 0x71a388;
Y_VALUES[29].qmn = 0x72b7d2;
Y_VALUES[30].qmn = 0x73b759;
Y_VALUES[31].qmn = 0x74a3ac;
Y_VALUES[32].qmn = 0x757e3d;
Y_VALUES[33].qmn = 0x764860;
Y_VALUES[34].qmn = 0x770353;
Y_VALUES[35].qmn = 0x77b039;
Y_VALUES[36].qmn = 0x785020;
Y_VALUES[37].qmn = 0x78e404;
Y_VALUES[38].qmn = 0x796cca;
Y_VALUES[39].qmn = 0x79eb49;
Y_VALUES[40].qmn = 0x7a6046;
Y_VALUES[41].qmn = 0x7acc78;
Y_VALUES[42].qmn = 0x7b3089;
Y_VALUES[43].qmn = 0x7b8d15;
Y_VALUES[44].qmn = 0x7be2ac;
Y_VALUES[45].qmn = 0x7c31d5;
Y_VALUES[46].qmn = 0x7c7b0a;
Y_VALUES[47].qmn = 0x7cbec0;
Y_VALUES[48].qmn = 0x7cfd5e;
Y_VALUES[49].qmn = 0x7d3748;
Y_VALUES[50].qmn = 0x7d6cd8;
Y_VALUES[51].qmn = 0x7d9e61;
Y_VALUES[52].qmn = 0x7dcc32;
Y_VALUES[53].qmn = 0x7df690;
Y_VALUES[54].qmn = 0x7e1dc0;
Y_VALUES[55].qmn = 0x7e41fe;
Y_VALUES[56].qmn = 0x7e6383;
Y_VALUES[57].qmn = 0x7e8282;
Y_VALUES[58].qmn = 0x7e9f2e;
Y_VALUES[59].qmn = 0x7eb9b1;
Y_VALUES[60].qmn = 0x7ed237;
Y_VALUES[61].qmn = 0x7ee8e5;
Y_VALUES[62].qmn = 0x7efddf;
Y_VALUES[63].qmn = 0x7f1145;
Y_VALUES[64].qmn = 0x7f2336;
Y_VALUES[65].qmn = 0x7f33cd;
Y_VALUES[66].qmn = 0x7f4326;
Y_VALUES[67].qmn = 0x7f5157;
Y_VALUES[68].qmn = 0x7f5e77;
Y_VALUES[69].qmn = 0x7f6a9b;
Y_VALUES[70].qmn = 0x7f75d5;
Y_VALUES[71].qmn = 0x7f8037;
Y_VALUES[72].qmn = 0x7f89d1;
Y_VALUES[73].qmn = 0x7f92b3;
Y_VALUES[74].qmn = 0x7f9aea;
Y_VALUES[75].qmn = 0x7fa283;
Y_VALUES[76].qmn = 0x7fa989;
Y_VALUES[77].qmn = 0x7fb009;
Y_VALUES[78].qmn = 0x7fb60b;
Y_VALUES[79].qmn = 0x7fbb9a;
Y_VALUES[80].qmn = 0x7fc0be;
Y_VALUES[81].qmn = 0x7fc57f;
Y_VALUES[82].qmn = 0x7fc9e4;
Y_VALUES[83].qmn = 0x7fcdf5;
Y_VALUES[84].qmn = 0x7fd1b8;
Y_VALUES[85].qmn = 0x7fd532;
Y_VALUES[86].qmn = 0x7fd86a;
Y_VALUES[87].qmn = 0x7fdb63;
Y_VALUES[88].qmn = 0x7fde24;
Y_VALUES[89].qmn = 0x7fe0af;
Y_VALUES[90].qmn = 0x7fe309;
Y_VALUES[91].qmn = 0x7fe537;
Y_VALUES[92].qmn = 0x7fe73a;
Y_VALUES[93].qmn = 0x7fe916;
Y_VALUES[94].qmn = 0x7feacf;
Y_VALUES[95].qmn = 0x7fec67;
Y_VALUES[96].qmn = 0x7fede0;
Y_VALUES[97].qmn = 0x7fef3d;
Y_VALUES[98].qmn = 0x7ff07f;
Y_VALUES[99].qmn = 0x7ff1a9;
Y_VALUES[100].qmn = 0x7ff2bd;
Y_VALUES[101].qmn = 0x7ff3bc;
Y_VALUES[102].qmn = 0x7ff4a8;
Y_VALUES[103].qmn = 0x7ff582;
Y_VALUES[104].qmn = 0x7ff64c;
Y_VALUES[105].qmn = 0x7ff707;
Y_VALUES[106].qmn = 0x7ff7b3;
Y_VALUES[107].qmn = 0x7ff853;
Y_VALUES[108].qmn = 0x7ff8e7;
Y_VALUES[109].qmn = 0x7ff96f;
Y_VALUES[110].qmn = 0x7ff9ed;
Y_VALUES[111].qmn = 0x7ffa62;
Y_VALUES[112].qmn = 0x7fface;
Y_VALUES[113].qmn = 0x7ffb32;
Y_VALUES[114].qmn = 0x7ffb8f;
Y_VALUES[115].qmn = 0x7ffbe4;
Y_VALUES[116].qmn = 0x7ffc33;
Y_VALUES[117].qmn = 0x7ffc7c;
Y_VALUES[118].qmn = 0x7ffcc0;
Y_VALUES[119].qmn = 0x7ffcfe;
Y_VALUES[120].qmn = 0x7ffd38;
Y_VALUES[121].qmn = 0x7ffd6d;
Y_VALUES[122].qmn = 0x7ffd9f;
Y_VALUES[123].qmn = 0x7ffdcd;
Y_VALUES[124].qmn = 0x7ffdf7;
Y_VALUES[125].qmn = 0x7ffe1e;
Y_VALUES[126].qmn = 0x7ffe42;
Y_VALUES[127].qmn = 0x7ffe64;

// M Scaled down by 2^4
q0_23_t M_VALUES[256];
M_VALUES[128].qmn = 0xf7;
M_VALUES[129].qmn = 0x10b;
M_VALUES[130].qmn = 0x121;
M_VALUES[131].qmn = 0x138;
M_VALUES[132].qmn = 0x152;
M_VALUES[133].qmn = 0x16d;
M_VALUES[134].qmn = 0x18b;
M_VALUES[135].qmn = 0x1ab;
M_VALUES[136].qmn = 0x1ce;
M_VALUES[137].qmn = 0x1f4;
M_VALUES[138].qmn = 0x21c;
M_VALUES[139].qmn = 0x248;
M_VALUES[140].qmn = 0x278;
M_VALUES[141].qmn = 0x2ab;
M_VALUES[142].qmn = 0x2e3;
M_VALUES[143].qmn = 0x31f;
M_VALUES[144].qmn = 0x360;
M_VALUES[145].qmn = 0x3a6;
M_VALUES[146].qmn = 0x3f2;
M_VALUES[147].qmn = 0x444;
M_VALUES[148].qmn = 0x49d;
M_VALUES[149].qmn = 0x4fd;
M_VALUES[150].qmn = 0x564;
M_VALUES[151].qmn = 0x5d5;
M_VALUES[152].qmn = 0x64e;
M_VALUES[153].qmn = 0x6d1;
M_VALUES[154].qmn = 0x75f;
M_VALUES[155].qmn = 0x7f8;
M_VALUES[156].qmn = 0x89e;
M_VALUES[157].qmn = 0x951;
M_VALUES[158].qmn = 0xa13;
M_VALUES[159].qmn = 0xae5;
M_VALUES[160].qmn = 0xbc8;
M_VALUES[161].qmn = 0xcbd;
M_VALUES[162].qmn = 0xdc6;
M_VALUES[163].qmn = 0xee4;
M_VALUES[164].qmn = 0x101a;
M_VALUES[165].qmn = 0x1169;
M_VALUES[166].qmn = 0x12d3;
M_VALUES[167].qmn = 0x145b;
M_VALUES[168].qmn = 0x1602;
M_VALUES[169].qmn = 0x17cc;
M_VALUES[170].qmn = 0x19bb;
M_VALUES[171].qmn = 0x1bd2;
M_VALUES[172].qmn = 0x1e15;
M_VALUES[173].qmn = 0x2087;
M_VALUES[174].qmn = 0x232c;
M_VALUES[175].qmn = 0x2607;
M_VALUES[176].qmn = 0x291e;
M_VALUES[177].qmn = 0x2c76;
M_VALUES[178].qmn = 0x3013;
M_VALUES[179].qmn = 0x33fb;
M_VALUES[180].qmn = 0x3834;
M_VALUES[181].qmn = 0x3cc5;
M_VALUES[182].qmn = 0x41b6;
M_VALUES[183].qmn = 0x470d;
M_VALUES[184].qmn = 0x4cd3;
M_VALUES[185].qmn = 0x5311;
M_VALUES[186].qmn = 0x59d1;
M_VALUES[187].qmn = 0x611d;
M_VALUES[188].qmn = 0x6901;
M_VALUES[189].qmn = 0x7189;
M_VALUES[190].qmn = 0x7ac3;
M_VALUES[191].qmn = 0x84bd;
M_VALUES[192].qmn = 0x8f86;
M_VALUES[193].qmn = 0x9b30;
M_VALUES[194].qmn = 0xa7cc;
M_VALUES[195].qmn = 0xb56f;
M_VALUES[196].qmn = 0xc42d;
M_VALUES[197].qmn = 0xd41e;
M_VALUES[198].qmn = 0xe55a;
M_VALUES[199].qmn = 0xf7fd;
M_VALUES[200].qmn = 0x10c24;
M_VALUES[201].qmn = 0x121ee;
M_VALUES[202].qmn = 0x1397d;
M_VALUES[203].qmn = 0x152f6;
M_VALUES[204].qmn = 0x16e82;
M_VALUES[205].qmn = 0x18c4a;
M_VALUES[206].qmn = 0x1ac7d;
M_VALUES[207].qmn = 0x1cf4f;
M_VALUES[208].qmn = 0x1f4f5;
M_VALUES[209].qmn = 0x21da9;
M_VALUES[210].qmn = 0x249ad;
M_VALUES[211].qmn = 0x27944;
M_VALUES[212].qmn = 0x2acba;
M_VALUES[213].qmn = 0x2e45d;
M_VALUES[214].qmn = 0x32087;
M_VALUES[215].qmn = 0x36193;
M_VALUES[216].qmn = 0x3a7e9;
M_VALUES[217].qmn = 0x3f3f6;
M_VALUES[218].qmn = 0x44630;
M_VALUES[219].qmn = 0x49f1a;
M_VALUES[220].qmn = 0x4ff3d;
M_VALUES[221].qmn = 0x5672f;
M_VALUES[222].qmn = 0x5d795;
M_VALUES[223].qmn = 0x6511c;
M_VALUES[224].qmn = 0x6d483;
M_VALUES[225].qmn = 0x76297;
M_VALUES[226].qmn = 0x7fc37;
M_VALUES[227].qmn = 0x8a253;
M_VALUES[228].qmn = 0x955ef;
M_VALUES[229].qmn = 0xa1822;
M_VALUES[230].qmn = 0xaea1d;
M_VALUES[231].qmn = 0xbcd28;
M_VALUES[232].qmn = 0xcc2a6;
M_VALUES[233].qmn = 0xdcc17;
M_VALUES[234].qmn = 0xeeb1a;
M_VALUES[235].qmn = 0x10216f;
M_VALUES[236].qmn = 0x1170fb;
M_VALUES[237].qmn = 0x12dbcc;
M_VALUES[238].qmn = 0x146418;
M_VALUES[239].qmn = 0x160c44;
M_VALUES[240].qmn = 0x17d6e8;
M_VALUES[241].qmn = 0x19c6d1;
M_VALUES[242].qmn = 0x1bdf06;
M_VALUES[243].qmn = 0x1e22cc;
M_VALUES[244].qmn = 0x2095b0;
M_VALUES[245].qmn = 0x233b83;
M_VALUES[246].qmn = 0x26186b;
M_VALUES[247].qmn = 0x2930e1;
M_VALUES[248].qmn = 0x2c89bc;
M_VALUES[249].qmn = 0x302837;
M_VALUES[250].qmn = 0x3411fa;
M_VALUES[251].qmn = 0x384d24;
M_VALUES[252].qmn = 0x3ce053;
M_VALUES[253].qmn = 0x41d2ac;
M_VALUES[254].qmn = 0x472beb;
M_VALUES[255].qmn = 0x4cf46e;
M_VALUES[0].qmn = 0x4cf46e;
M_VALUES[1].qmn = 0x472beb;
M_VALUES[2].qmn = 0x41d2ac;
M_VALUES[3].qmn = 0x3ce053;
M_VALUES[4].qmn = 0x384d24;
M_VALUES[5].qmn = 0x3411fa;
M_VALUES[6].qmn = 0x302837;
M_VALUES[7].qmn = 0x2c89bc;
M_VALUES[8].qmn = 0x2930e1;
M_VALUES[9].qmn = 0x26186b;
M_VALUES[10].qmn = 0x233b83;
M_VALUES[11].qmn = 0x2095b0;
M_VALUES[12].qmn = 0x1e22cc;
M_VALUES[13].qmn = 0x1bdf06;
M_VALUES[14].qmn = 0x19c6d1;
M_VALUES[15].qmn = 0x17d6e8;
M_VALUES[16].qmn = 0x160c44;
M_VALUES[17].qmn = 0x146418;
M_VALUES[18].qmn = 0x12dbcc;
M_VALUES[19].qmn = 0x1170fb;
M_VALUES[20].qmn = 0x10216f;
M_VALUES[21].qmn = 0xeeb1a;
M_VALUES[22].qmn = 0xdcc17;
M_VALUES[23].qmn = 0xcc2a6;
M_VALUES[24].qmn = 0xbcd28;
M_VALUES[25].qmn = 0xaea1d;
M_VALUES[26].qmn = 0xa1822;
M_VALUES[27].qmn = 0x955ef;
M_VALUES[28].qmn = 0x8a253;
M_VALUES[29].qmn = 0x7fc37;
M_VALUES[30].qmn = 0x76297;
M_VALUES[31].qmn = 0x6d483;
M_VALUES[32].qmn = 0x6511c;
M_VALUES[33].qmn = 0x5d795;
M_VALUES[34].qmn = 0x5672f;
M_VALUES[35].qmn = 0x4ff3d;
M_VALUES[36].qmn = 0x49f1a;
M_VALUES[37].qmn = 0x44630;
M_VALUES[38].qmn = 0x3f3f6;
M_VALUES[39].qmn = 0x3a7e9;
M_VALUES[40].qmn = 0x36193;
M_VALUES[41].qmn = 0x32087;
M_VALUES[42].qmn = 0x2e45d;
M_VALUES[43].qmn = 0x2acba;
M_VALUES[44].qmn = 0x27944;
M_VALUES[45].qmn = 0x249ad;
M_VALUES[46].qmn = 0x21da9;
M_VALUES[47].qmn = 0x1f4f5;
M_VALUES[48].qmn = 0x1cf4f;
M_VALUES[49].qmn = 0x1ac7d;
M_VALUES[50].qmn = 0x18c4a;
M_VALUES[51].qmn = 0x16e82;
M_VALUES[52].qmn = 0x152f6;
M_VALUES[53].qmn = 0x1397d;
M_VALUES[54].qmn = 0x121ee;
M_VALUES[55].qmn = 0x10c24;
M_VALUES[56].qmn = 0xf7fd;
M_VALUES[57].qmn = 0xe55a;
M_VALUES[58].qmn = 0xd41e;
M_VALUES[59].qmn = 0xc42d;
M_VALUES[60].qmn = 0xb56f;
M_VALUES[61].qmn = 0xa7cc;
M_VALUES[62].qmn = 0x9b30;
M_VALUES[63].qmn = 0x8f86;
M_VALUES[64].qmn = 0x84bd;
M_VALUES[65].qmn = 0x7ac3;
M_VALUES[66].qmn = 0x7189;
M_VALUES[67].qmn = 0x6901;
M_VALUES[68].qmn = 0x611d;
M_VALUES[69].qmn = 0x59d1;
M_VALUES[70].qmn = 0x5311;
M_VALUES[71].qmn = 0x4cd3;
M_VALUES[72].qmn = 0x470d;
M_VALUES[73].qmn = 0x41b6;
M_VALUES[74].qmn = 0x3cc5;
M_VALUES[75].qmn = 0x3834;
M_VALUES[76].qmn = 0x33fb;
M_VALUES[77].qmn = 0x3013;
M_VALUES[78].qmn = 0x2c76;
M_VALUES[79].qmn = 0x291e;
M_VALUES[80].qmn = 0x2607;
M_VALUES[81].qmn = 0x232c;
M_VALUES[82].qmn = 0x2087;
M_VALUES[83].qmn = 0x1e15;
M_VALUES[84].qmn = 0x1bd2;
M_VALUES[85].qmn = 0x19bb;
M_VALUES[86].qmn = 0x17cc;
M_VALUES[87].qmn = 0x1602;
M_VALUES[88].qmn = 0x145b;
M_VALUES[89].qmn = 0x12d3;
M_VALUES[90].qmn = 0x1169;
M_VALUES[91].qmn = 0x101a;
M_VALUES[92].qmn = 0xee4;
M_VALUES[93].qmn = 0xdc6;
M_VALUES[94].qmn = 0xcbd;
M_VALUES[95].qmn = 0xbc8;
M_VALUES[96].qmn = 0xae5;
M_VALUES[97].qmn = 0xa13;
M_VALUES[98].qmn = 0x951;
M_VALUES[99].qmn = 0x89e;
M_VALUES[100].qmn = 0x7f8;
M_VALUES[101].qmn = 0x75f;
M_VALUES[102].qmn = 0x6d1;
M_VALUES[103].qmn = 0x64e;
M_VALUES[104].qmn = 0x5d5;
M_VALUES[105].qmn = 0x564;
M_VALUES[106].qmn = 0x4fd;
M_VALUES[107].qmn = 0x49d;
M_VALUES[108].qmn = 0x444;
M_VALUES[109].qmn = 0x3f2;
M_VALUES[110].qmn = 0x3a6;
M_VALUES[111].qmn = 0x360;
M_VALUES[112].qmn = 0x31f;
M_VALUES[113].qmn = 0x2e3;
M_VALUES[114].qmn = 0x2ab;
M_VALUES[115].qmn = 0x278;
M_VALUES[116].qmn = 0x248;
M_VALUES[117].qmn = 0x21c;
M_VALUES[118].qmn = 0x1f4;
M_VALUES[119].qmn = 0x1ce;
M_VALUES[120].qmn = 0x1ab;
M_VALUES[121].qmn = 0x18b;
M_VALUES[122].qmn = 0x16d;
M_VALUES[123].qmn = 0x152;
M_VALUES[124].qmn = 0x138;
M_VALUES[125].qmn = 0x121;
M_VALUES[126].qmn = 0x10b;
M_VALUES[127].qmn = 0xf7;

// Do lookup
q0_23_t y = Y_VALUES[lut_addr];
q0_23_t m = M_VALUES[lut_addr];

// Do linear interp, dy = dx * m
// Not using fixed point mult funcs since
// need intermediates to do different scaling than normal
q0_23_t dxi; // Fractional bits of input x
dxi.qmn = interp_point;
int48_t temp = dxi.qmn * m.qmn;
int48_t temp_rounded = temp + (1 << (23 - 1));
// Shift right by 23 for normal Q mult, then shift left by 4 to account for slope scaling
q0_23_t dy;
dy.qmn = temp >> 19;
// Interpolate
q0_23_t yi = q0_23_add(y, dy);
return yi;
}

//printf("y_lut %f, dx %X * %d m.qmn = %f dy\n",q0_23_to_float(y), dxi, m.qmn, q0_23_to_float(dy));

/*
#pragma MAIN_MHZ distortion_tb 100.0
void distortion_tb()
{
  // -1.0 + (interpolation size-1) = point most distance from LUT data
  static int24_t x_int = 0xFE0000;  //0; //0x1800000; // 0x181FFFF; //-0x800000 + (131072-1); 
  q0_23_t x;
  x.qmn = x_int;
  q0_23_t y = distortion_mono(x);
  printf("x,y,%f,%f\n", q0_23_to_float(x), q0_23_to_float(y));
  x_int += 1; //131072; // Increment by interp points between LUT entries
}
*/


// Stereo
//#include "../i2s/i2s_mac.c" // For stereo types
i2s_samples_s distortion(i2s_samples_s in_samples)
{
  i2s_samples_s rv;
  rv.samples.l_data = distortion_mono(in_samples.samples.l_data);
  rv.samples.r_data = distortion_mono(in_samples.samples.r_data);
  rv.valid = in_samples.valid;
  return rv;
}


